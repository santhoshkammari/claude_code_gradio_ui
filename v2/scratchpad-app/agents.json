[
  {
    "id": "css-restructure-agent",
    "system_prompt": "You are a CSS expert. You will modify MainChatView.css to restructure the chat input layout.",
    "task": "In src/components/MainChatView/MainChatView.css:\n\n1. Hide the top bar: Add `.input-top-bar { display: none; }` at line 24\n\n2. Increase input area height:\n   - Find `.input-main-area` (around line 200)\n   - Change `min-height` to `120px`\n   - Ensure `flex-direction: row` and `align-items: flex-end`\n   - Keep `gap: 0.5rem`\n\n3. Increase textarea height:\n   - Find `.minimal-textarea` (around line 204)\n   - Change `min-height: 56px` to `min-height: 100px`\n   - Add `padding-right: 12px`\n\n4. Add new compact pill styles after `.config-pill` styles (after line 56):\n```css\n.config-pill-compact {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.25rem 0.5rem;\n  background: transparent;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: var(--text-primary);\n  cursor: pointer;\n  transition: all 0.15s;\n  white-space: nowrap;\n  height: 28px;\n  opacity: 0.8;\n}\n\n.config-pill-compact:hover {\n  background: var(--bg-hover);\n  border-color: var(--border-hover);\n  opacity: 1;\n}\n```\n\n5. Add controls container style after compact pill:\n```css\n.input-controls-inline {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  flex-shrink: 0;\n  padding-bottom: 0.4rem;\n}\n```\n\n6. Add attachment tray styles (add after `.attached-files-mini` styles):\n```css\n.attachment-tray {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.4rem;\n  padding: 0.5rem 0.75rem;\n  margin-bottom: 0.5rem;\n  background: var(--bg-secondary);\n  border-radius: 12px;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.file-badge-compact {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.3rem 0.5rem;\n  background: var(--bg-tertiary);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: var(--text-secondary);\n}\n\n.file-badge-compact button {\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: 0 0.2rem;\n  font-size: 1rem;\n  line-height: 1;\n}\n\n.file-badge-compact button:hover {\n  color: var(--text-primary);\n}\n```\n\n7. Update `.icon-btn` to work at smaller size (find around line 250):\n   - Keep existing styles but add `.icon-btn-compact` variant if needed\n\nMake these changes precisely. Do not modify other styles."
  },
  {
    "id": "jsx-restructure-agent",
    "system_prompt": "You are a React expert. You will modify MainChatView.tsx to restructure the JSX layout.",
    "task": "In src/components/MainChatView/MainChatView.tsx:\n\n1. Move the attachment tray outside and above input-main-area (around lines 248-258):\n   - Find the current `{attachedFiles.length > 0 && ...}` block inside `.input-top-bar`\n   - Move it to be a sibling BEFORE `.input-main-area` (line 260)\n   - Change class from `attached-files-mini` to `attachment-tray`\n   - Update the inner structure to show file names:\n\nReplace:\n```jsx\n<div className=\"attached-files-mini\">\n  {attachedFiles.map((file, idx) => (\n    <div key={idx} className=\"file-mini\">\n      <span>{file.type.startsWith('image/') ? 'ğŸ–¼ï¸' : 'ğŸ“'}</span>\n      <button onClick={() => handleRemoveFile(idx)}>Ã—</button>\n    </div>\n  ))}\n</div>\n```\n\nWith:\n```jsx\n<div className=\"attachment-tray\">\n  {attachedFiles.map((file, idx) => (\n    <div key={idx} className=\"file-badge-compact\">\n      <span>{file.type.startsWith('image/') ? 'ğŸ–¼ï¸' : 'ğŸ“'}</span>\n      <span>{file.name}</span>\n      <button onClick={() => handleRemoveFile(idx)}>Ã—</button>\n    </div>\n  ))}\n</div>\n```\n\n2. Move config pills into input-main-area (lines 172-246):\n   - Find all three `.pill-wrapper` divs (model, agent, tools) inside `.config-pills`\n   - Cut them out (keep their complete structure including dropdowns)\n   - Create a new container `.input-controls-inline` inside `.input-main-area` AFTER the textarea\n   - Paste the three pill-wrapper divs into this new container\n   - Change `config-pill` class to `config-pill-compact` for all three pills\n   - Keep all dropdown logic and refs intact\n\n3. Move attachment and send buttons into the controls container:\n   - Find `.input-actions-mini` (line 277)\n   - Move its contents (attachment button and send button) into `.input-controls-inline` after the pills\n   - Remove the `.input-actions-mini` wrapper\n   - Add class `icon-btn-compact` to the attachment button\n\nFinal structure inside `.chat-input-floating` should be:\n```jsx\n<div className=\"chat-input-floating\">\n  {/* Optional attachment tray */}\n  {attachedFiles.length > 0 && (\n    <div className=\"attachment-tray\">\n      {/* file badges */}\n    </div>\n  )}\n\n  {/* Main input area */}\n  <div className=\"input-main-area\">\n    <textarea className=\"minimal-textarea\" ... />\n    \n    <div className=\"input-controls-inline\">\n      {/* Model pill */}\n      <div className=\"pill-wrapper\" ref={modelDropdownRef}>...</div>\n      {/* Agent pill */}\n      <div className=\"pill-wrapper\" ref={agentDropdownRef}>...</div>\n      {/* Tools pill */}\n      <div className=\"pill-wrapper\" ref={toolsDropdownRef}>...</div>\n      {/* Attachment button */}\n      <button className=\"icon-btn icon-btn-compact\" ...>...</button>\n      {/* Send button */}\n      <button className=\"send-btn-minimal\" ...>...</button>\n    </div>\n  </div>\n\n  {/* Hidden file input */}\n  <input ref={fileInputRef} type=\"file\" ... />\n</div>\n```\n\n4. Remove or comment out the `.input-top-bar` div entirely (lines 172-258)\n\nMake these changes precisely. Keep all state, refs, and event handlers intact."
  }
]
