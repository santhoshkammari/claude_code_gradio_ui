[
  {
    "id": "sidebar-collapse-agent",
    "system_prompt": "You are a React and CSS expert tasked with implementing a collapsible sidebar with icon-only mode.",
    "task": "Implement collapsible left sidebar with the following requirements:\n\n## Files to Modify:\n1. src/App.tsx\n2. src/App.css\n3. src/components/LeftSidebar/LeftSidebar.tsx\n4. src/components/LeftSidebar/LeftSidebar.css\n\n## App.tsx Changes:\n\n1. Add state for sidebar collapse:\n```typescript\nconst [sidebarCollapsed, setSidebarCollapsed] = useState(false)\n```\n\n2. Add toggle handler:\n```typescript\nconst toggleSidebar = () => {\n  setSidebarCollapsed(!sidebarCollapsed)\n}\n```\n\n3. Pass props to LeftSidebar component (find the LeftSidebar component around line 450):\n```tsx\n<LeftSidebar\n  // ... keep existing props\n  isCollapsed={sidebarCollapsed}\n  onToggleCollapse={toggleSidebar}\n/>\n```\n\n## App.css Changes:\n\nAdd transition styles for sidebar width change:\n```css\n.left-sidebar {\n  transition: width 0.3s ease, padding 0.3s ease;\n}\n\n.left-sidebar.collapsed {\n  width: 50px;\n}\n```\n\n## LeftSidebar.tsx Changes:\n\n1. Update interface to add new props:\n```typescript\ninterface LeftSidebarProps {\n  // ... existing props\n  isCollapsed: boolean\n  onToggleCollapse: () => void\n}\n```\n\n2. Destructure new props in component:\n```typescript\nexport default function LeftSidebar({\n  // ... existing props\n  isCollapsed,\n  onToggleCollapse\n}: LeftSidebarProps) {\n```\n\n3. Add hamburger button at the TOP of sidebar header (before logo):\n```tsx\n<div className=\"sidebar-header\">\n  <button className=\"hamburger-toggle\" onClick={onToggleCollapse}>\n    <span className=\"hamburger-icon\">\n      <span></span>\n      <span></span>\n      <span></span>\n    </span>\n  </button>\n  {!isCollapsed && (\n    <>\n      <div className=\"logo\">ü§ñ Scratchpad AI</div>\n      {/* Keep existing ThemeToggle */}\n    </>\n  )}\n</div>\n```\n\n4. Add className to main aside element:\n```tsx\n<aside className={`left-sidebar ${isCollapsed ? 'collapsed' : ''}`}>\n```\n\n5. Update session items to add icon-only mode:\n```tsx\n{sessions.map((session) => (\n  <div\n    key={session.id}\n    className={`session-item ${\n      currentSession?.id === session.id ? 'active' : ''\n    } ${isCollapsed ? 'icon-only' : ''}`}\n    data-title={session.title}\n    onClick={() => onSessionClick(session)}\n  >\n    <div className=\"session-icon\">üìÅ</div>\n    {!isCollapsed && (\n      <>\n        {/* Keep existing session info */}\n        {/* Keep existing session toggle */}\n      </>\n    )}\n  </div>\n))}\n```\n\n6. Update new session section:\n```tsx\n{!isCollapsed ? (\n  // Keep existing full new session input\n  <div className=\"new-session-section\">\n    {/* existing content */}\n  </div>\n) : (\n  <button\n    className=\"new-session-icon\"\n    onClick={() => {/* trigger new session */}}\n    title=\"New Session\"\n  >\n    <span>+</span>\n  </button>\n)}\n```\n\n## LeftSidebar.css Changes:\n\nAdd these styles at the end of the file:\n\n```css\n/* Hamburger Toggle Button */\n.hamburger-toggle {\n  width: 32px;\n  height: 32px;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n  flex-shrink: 0;\n}\n\n.hamburger-toggle:hover {\n  background: var(--bg-hover);\n  border-radius: 6px;\n}\n\n.hamburger-icon {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: 18px;\n}\n\n.hamburger-icon span {\n  height: 2px;\n  background: var(--text-primary);\n  border-radius: 2px;\n  transition: transform 0.3s, opacity 0.3s;\n}\n\n/* Animated hamburger to X when expanded */\n.left-sidebar:not(.collapsed) .hamburger-icon span:nth-child(1) {\n  transform: translateY(6px) rotate(45deg);\n}\n\n.left-sidebar:not(.collapsed) .hamburger-icon span:nth-child(2) {\n  opacity: 0;\n}\n\n.left-sidebar:not(.collapsed) .hamburger-icon span:nth-child(3) {\n  transform: translateY(-6px) rotate(-45deg);\n}\n\n/* Collapsed State */\n.left-sidebar.collapsed {\n  width: 50px;\n  padding: 12px 8px;\n}\n\n.left-sidebar.collapsed .sidebar-header {\n  flex-direction: column;\n  gap: 12px;\n}\n\n/* Hide text content when collapsed */\n.left-sidebar.collapsed .logo,\n.left-sidebar.collapsed .theme-toggle,\n.left-sidebar.collapsed .session-info,\n.left-sidebar.collapsed .session-toggle,\n.left-sidebar.collapsed .session-tasks-list,\n.left-sidebar.collapsed .new-session-section,\n.left-sidebar.collapsed .profile-card {\n  display: none;\n}\n\n/* Icon-only session items */\n.session-item.icon-only {\n  padding: 8px;\n  justify-content: center;\n  position: relative;\n}\n\n.session-item.icon-only .session-icon {\n  font-size: 20px;\n  margin: 0;\n}\n\n/* Tooltips for collapsed mode */\n.left-sidebar.collapsed .session-item:hover::after {\n  content: attr(data-title);\n  position: absolute;\n  left: calc(100% + 8px);\n  top: 50%;\n  transform: translateY(-50%);\n  background: var(--bg-secondary);\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 1;\n  pointer-events: none;\n  z-index: 1000;\n  border: 1px solid var(--border-color);\n}\n\n/* New session icon button */\n.new-session-icon {\n  width: 100%;\n  height: 36px;\n  background: var(--accent-primary);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  font-size: 20px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n\n.new-session-icon:hover {\n  background: var(--accent-hover);\n}\n\n/* Collapsed profile section */\n.left-sidebar.collapsed .profile-section {\n  padding: 8px;\n}\n\n.left-sidebar.collapsed .profile-avatar {\n  width: 32px;\n  height: 32px;\n  margin: 0 auto;\n}\n```\n\n## Important:\n- Keep all existing functionality intact\n- Don't remove any existing code unless specified\n- Only add the new collapse functionality\n- Ensure smooth transitions\n- Test that all interactive elements still work when collapsed"
  },
  {
    "id": "git-diff-redesign-agent",
    "system_prompt": "You are a React and CSS expert tasked with redesigning the RightSidebar to show collapsible per-file git diffs.",
    "task": "Redesign RightSidebar to show collapsible git diff by file:\n\n## Files to Modify:\n1. src/components/RightSidebar/RightSidebar.tsx\n2. src/components/RightSidebar/RightSidebar.css\n\n## RightSidebar.tsx Changes:\n\n1. Update props interface (remove fileChanges and activityLog):\n```typescript\ninterface RightSidebarProps {\n  selectedTask: any\n  gitDiff: string\n  onClose: () => void\n}\n```\n\n2. Add state and types at the top:\n```typescript\ninterface FileDiff {\n  path: string\n  additions: number\n  deletions: number\n  diff: string\n}\n\nconst [expandedFiles, setExpandedFiles] = useState<Set<string>>(new Set())\nconst [parsedFiles, setParsedFiles] = useState<FileDiff[]>([])\n```\n\n3. Add git diff parser function:\n```typescript\nconst parseGitDiff = (diff: string): FileDiff[] => {\n  const files: FileDiff[] = []\n  const diffBlocks = diff.split('diff --git')\n\n  for (let i = 1; i < diffBlocks.length; i++) {\n    const block = diffBlocks[i]\n    const lines = block.split('\\n')\n\n    // Extract filename from \"a/path b/path\"\n    const fileMatch = lines[0].match(/a\\/(.*?) b\\/(.*)$/)\n    if (!fileMatch) continue\n\n    const filename = fileMatch[2]\n\n    // Count additions and deletions\n    let additions = 0\n    let deletions = 0\n    let diffContent = ''\n\n    for (const line of lines) {\n      if (line.startsWith('+') && !line.startsWith('+++')) additions++\n      if (line.startsWith('-') && !line.startsWith('---')) deletions++\n      diffContent += line + '\\n'\n    }\n\n    files.push({\n      path: filename,\n      additions,\n      deletions,\n      diff: diffContent.trim()\n    })\n  }\n\n  return files\n}\n```\n\n4. Add useEffect to parse diff and expand first file:\n```typescript\nuseEffect(() => {\n  if (gitDiff) {\n    const files = parseGitDiff(gitDiff)\n    setParsedFiles(files)\n    if (files.length > 0) {\n      setExpandedFiles(new Set([files[0].path]))\n    }\n  } else {\n    setParsedFiles([])\n    setExpandedFiles(new Set())\n  }\n}, [gitDiff])\n```\n\n5. Add toggle handler:\n```typescript\nconst toggleFileExpand = (path: string) => {\n  setExpandedFiles(prev => {\n    const next = new Set(prev)\n    if (next.has(path)) {\n      next.delete(path)\n    } else {\n      next.add(path)\n    }\n    return next\n  })\n}\n```\n\n6. Replace entire JSX with new file diff view:\n```tsx\nreturn (\n  <aside className=\"right-sidebar\">\n    <div className=\"sidebar-header\">\n      <h3>Git Changes</h3>\n      <button className=\"close-button\" onClick={onClose}>\n        √ó\n      </button>\n    </div>\n\n    <div className=\"files-diff-section\">\n      {parsedFiles.length === 0 ? (\n        <div className=\"empty-state\">No changes detected</div>\n      ) : (\n        parsedFiles.map((file) => {\n          const isExpanded = expandedFiles.has(file.path)\n\n          return (\n            <div key={file.path} className=\"file-diff-item\">\n              <div\n                className=\"file-diff-header\"\n                onClick={() => toggleFileExpand(file.path)}\n              >\n                <span className=\"expand-icon\">\n                  {isExpanded ? '‚ñº' : '‚ñ∂'}\n                </span>\n                <span className=\"file-path\">{file.path}</span>\n                <div className=\"file-stats\">\n                  <span className=\"additions\">+{file.additions}</span>\n                  <span className=\"deletions\">-{file.deletions}</span>\n                </div>\n              </div>\n\n              {isExpanded && (\n                <pre className=\"file-diff-content\">\n                  <code>{file.diff}</code>\n                </pre>\n              )}\n            </div>\n          )\n        })\n      )}\n    </div>\n  </aside>\n)\n```\n\n## RightSidebar.css Changes:\n\nREMOVE these sections:\n- .files-section and all related styles\n- .activity-section and all related styles\n- .diff-section and all related styles\n- .file-item and related styles\n- .activity-item and related styles\n\nADD these new styles:\n\n```css\n.files-diff-section {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px;\n}\n\n.file-diff-item {\n  margin-bottom: 8px;\n  background: var(--bg-card);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.file-diff-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  cursor: pointer;\n  user-select: none;\n  transition: background 0.2s;\n}\n\n.file-diff-header:hover {\n  background: var(--bg-hover);\n}\n\n.expand-icon {\n  font-size: 12px;\n  color: var(--text-secondary);\n  width: 16px;\n  flex-shrink: 0;\n  transition: transform 0.2s;\n}\n\n.file-path {\n  flex: 1;\n  font-size: 13px;\n  font-family: 'Monaco', 'Menlo', monospace;\n  color: var(--text-primary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.file-stats {\n  display: flex;\n  gap: 8px;\n  font-size: 11px;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n\n.file-stats .additions {\n  color: #22c55e;\n}\n\n.file-stats .deletions {\n  color: #ef4444;\n}\n\n.file-diff-content {\n  margin: 0;\n  padding: 12px;\n  background: #1a1a1a;\n  border-top: 1px solid var(--border-color);\n  font-family: 'Monaco', 'Menlo', monospace;\n  font-size: 11px;\n  line-height: 1.5;\n  overflow-x: auto;\n  color: #e0e0e0;\n}\n\n.file-diff-content code {\n  display: block;\n}\n\n.empty-state {\n  padding: 24px;\n  text-align: center;\n  color: var(--text-secondary);\n  font-size: 13px;\n}\n\n.close-button {\n  background: transparent;\n  border: none;\n  font-size: 24px;\n  color: var(--text-secondary);\n  cursor: pointer;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: background 0.2s;\n}\n\n.close-button:hover {\n  background: var(--bg-hover);\n  color: var(--text-primary);\n}\n```\n\n## Important:\n- Remove all references to fileChanges and activityLog props\n- Only keep gitDiff prop for parsing\n- Ensure first file is expanded by default\n- Keep sidebar header styling consistent"
  }
]
